<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Market as a Mirror</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <link rel="stylesheet" href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css">
  <script src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>

</head>
<body>
<header class="site-header-nav">
    <div class="header-left">
        <a href="#" class="header-logo">The Market as a Mirror</a>
    </div>
    <nav class="header-nav">
        <ul>
            <li><a href="#intro">Overview</a></li>
            <li><a href="#research">Research</a></li>
            <li><a href="#methodology">Methodology</a></li>
            <li><a href="#story">Story</a></li>
        </ul>
    </nav>
</header>
<div class="hero-title animate-title">
  <h1 class="title-main">The Market as a Mirror</h1>
  <h2 class="title-sub">
    How Global Events and Social Emotions Shape Finance (2000–2025)
  </h2>
</div>

<div style="width: 100%; height: 800px;">
    <iframe 
        src="assets/visualizations/nasdaq_performance.html" 
        width="100%" 
        height="100%" 
        frameborder="0" 
        scrolling="no">
    </iframe>
</div>

<div class="hero-intro animate-intro" id="intro">
    <p class="intro-label">The Pulse of the Market</p>
    <p class="intro-text">
      We believe that financial markets are not just cold algorithms or rational systems.
      They are living, social organisms that react to human emotions, communication,
      and collective excitement or fear.
      <br><br>
      Over the past 25 years, our world has been shaken by wars, pandemics, innovations,
      and political shocks. Through every one of these moments, the market has mirrored
      human behavior, instantly turning global emotions into data, volatility,
      and price movements.
      <br><br>
      Before 2010, reactions followed news; after social media, they followed people —
      a single tweet could move billions.
      In this project, we explore how both global and social events, whether positive
      or negative, shape market behavior and investor sentiment.
      <br><br>
      By linking financial data with major world events, we measure how fear, hope,
      and herd dynamics spread through sectors.
      Ultimately, our goal is to show that markets don’t just move — <strong>they feel</strong>.
    </p>
  </div>
  <div class="timeline-container">
    <div id="timeline"></div>
  </div>
  <script type="module">
    import { getAllEventItems } from './assets/js/eventUtils.js';

    async function renderTimeline() {
      const items = new vis.DataSet(await getAllEventItems());
      const options = {
        autoResize: true,
        showCurrentTime: false,
        locale: 'en'
      };
      const container = document.getElementById('timeline');
      return new vis.Timeline(container, items, options);
    }

    renderTimeline().catch(error => {
      console.error('Failed to render timeline', error);
    });
  </script>
  
  <div class="research-section animate-section" id="research">
    <p class="section-label">Research Questions</p>
  
    <ul class="research-list">
      <li>
        How do different types of crises — wars, pandemics, or political shocks —
        affect global and sector-specific market performance?
      </li>
  
      <li>
        Which industries or assets (e.g., gold, energy, technology, luxury)
        act as safe havens versus shock amplifiers during crises?
      </li>
  
      <li>
        How long does it typically take for assets to recover to their pre-crisis levels,
        and how does this vary across sectors?
      </li>
  
      <li>
        Do early warning signals such as abnormal trading volumes or social media activity
        emerge before or during crises?
      </li>
  
      <li>
        How do influential figures (e.g., politicians, CEOs) or collective sentiment
        on social media affect short-term market movements?
      </li>
    </ul>
  </div>

  <div class="methodology-section" id="methodology">
    <p class="section-label">Methodology</p>
    <p class="methodology-intro">
      To understand how markets feel, react, and recover, we perform a systematic
      autopsy of financial crises. Each chapter dissects a different mechanism through
      which global events translate into market behavior.
    </p>
  </div>

  <div class="chapter-section fear-section" id="story">
    <div class="fear-copy">
      <h3 class="section-label">The Anatomy of Fear</h3>
      <p>
        In moments of crisis, fear is often the first emotion to reach financial markets.
        In this chapter, we examine how sudden global shocks trigger spikes in volatility,
        abnormal trading volumes, and sharp price movements.
      </p>
      <p>
        By aligning crisis timelines with market indicators, we identify the initial
        physiological response of the market — its reflexive reaction to uncertainty.
      </p>
    </div>

    <div class="fear-sticky">
      <div class="fear-sticky-inner">
        <div class="fear-sticky-left">
          <div class="fear-sticky-title"></div>
          <div class="chip-row">
            <span class="chip-row-label">Event</span>
            <div class="chip-row-items" id="event-chips"></div>
          </div>
          <div class="chip-row">
            <span class="chip-row-label">Sector</span>
            <div class="chip-row-items" id="sector-chips"></div>
          </div>
        </div>
        <div class="fear-sticky-right">
          <div class="selection-status" id="selection-status">
            Selected: —
          </div>
          <div class="update-hint" id="update-hint">Updated</div>
        </div>
      </div>
    </div>

    <div class="fear-charts">
      <div class="chart-card chart-card-full">
        <div class="chart-card-header">
          <div class="chart-title">CAR</div>
          <div class="chart-subtitle">Cumulative abnormal returns around the event</div>
        </div>
        <div class="chart-body">
          <img id="chart-car" alt="CAR chart" loading="lazy">
          <div class="chart-missing" data-for="chart-car">Image not available</div>
        </div>
      </div>

      <div class="chart-card chart-card-full">
        <div class="chart-card-header">
          <div class="chart-title">Drawdown</div>
          <div class="chart-subtitle">Depth and duration of market drops</div>
        </div>
        <div class="chart-body">
          <img id="chart-drawdown" alt="Drawdown chart" loading="lazy">
          <div class="chart-missing" data-for="chart-drawdown">Image not available</div>
        </div>
      </div>

      <div class="chart-card chart-card-full">
        <div class="chart-card-header">
          <div class="chart-title">Volcano</div>
          <div class="chart-subtitle">Cross-sectional impact during the shock</div>
        </div>
        <div class="chart-body">
          <img id="chart-volcano" alt="Volcano chart" loading="lazy">
          <div class="chart-missing" data-for="chart-volcano">Image not available</div>
        </div>
      </div>
    </div>

  </div>
  <script type="module">
    import { getAllEvents } from './assets/js/eventUtils.js';
    import { getAllSectors } from './assets/js/sectorUtils.js';
    import { getChartPaths } from './assets/js/chartPathUtils.js';

    const CORAL = '#f9624f';
    const eventChips = document.getElementById('event-chips');
    const sectorChips = document.getElementById('sector-chips');
    const statusEl = document.getElementById('selection-status');
    const updateHint = document.getElementById('update-hint');

    const chartEls = {
      car: document.getElementById('chart-car'),
      drawdown: document.getElementById('chart-drawdown'),
      volcano: document.getElementById('chart-volcano')
    };

    const missingEls = {
      car: document.querySelector('[data-for="chart-car"]'),
      drawdown: document.querySelector('[data-for="chart-drawdown"]'),
      volcano: document.querySelector('[data-for="chart-volcano"]')
    };

    let events = [];
    let sectors = [];
    let selectedEventId = null;
    let selectedSectorKey = null;
    let hintTimer = null;

    function setChipVisual(chip, active) {
      chip.classList.toggle('active', active);
    }

    function renderEventChips() {
      eventChips.innerHTML = '';
      events.forEach(event => {
        const chip = document.createElement('button');
        chip.className = 'chip';
        chip.style.setProperty('--chip-color', CORAL);
        chip.textContent = event.name;
        setChipVisual(chip, event.id === selectedEventId);
        chip.addEventListener('click', () => {
          if (selectedEventId === event.id) return;
          selectedEventId = event.id;
          renderEventChips();
          updateSelection();
        });
        eventChips.appendChild(chip);
      });
    }

    function renderSectorChips() {
      sectorChips.innerHTML = '';
      sectors.forEach(sector => {
        const chip = document.createElement('button');
        chip.className = 'chip';
        chip.style.setProperty('--chip-color', sector.color || CORAL);
        chip.textContent = sector.label;
        setChipVisual(chip, String(sector.key) === String(selectedSectorKey));
        chip.addEventListener('click', () => {
          if (String(selectedSectorKey) === String(sector.key)) return;
          selectedSectorKey = sector.key;
          renderSectorChips();
          updateSelection();
        });
        sectorChips.appendChild(chip);
      });
    }

    function updateStatus() {
      const event = events.find(item => item.id === selectedEventId);
      const sector = sectors.find(item => String(item.key) === String(selectedSectorKey));
      if (!event || !sector) {
        statusEl.textContent = 'Selected: —';
        return;
      }
      statusEl.textContent = `Selected: ${event.name} × ${sector.label}`;
    }

    function showUpdateHint() {
      updateHint.classList.add('show');
      if (hintTimer) clearTimeout(hintTimer);
      hintTimer = setTimeout(() => updateHint.classList.remove('show'), 900);
    }

    function setChart(target, missingEl, src, alt) {
      if (!target || !missingEl) return;
      if (!src) {
        target.removeAttribute('src');
        missingEl.classList.add('visible');
        return;
      }
      missingEl.classList.remove('visible');
      target.onload = () => missingEl.classList.remove('visible');
      target.onerror = () => {
        missingEl.classList.add('visible');
        target.removeAttribute('src');
      };
      target.src = src;
      target.alt = alt;
    }

    async function updateCharts() {
      const paths = await getChartPaths(selectedEventId, selectedSectorKey);
      const event = events.find(item => item.id === selectedEventId);
      const sector = sectors.find(item => String(item.key) === String(selectedSectorKey));
      const descriptor = event && sector ? `${event.name} × ${sector.label}` : '';

      setChart(chartEls.car, missingEls.car, paths.car, `CAR — ${descriptor}`);
      setChart(chartEls.drawdown, missingEls.drawdown, paths.drawdown, `Drawdown — ${descriptor}`);
      setChart(chartEls.volcano, missingEls.volcano, paths.volcano, `Volcano — ${descriptor}`);
    }

    async function updateSelection() {
      updateStatus();
      await updateCharts();
      showUpdateHint();
    }

    (async function initFear() {
      events = await getAllEvents();
      sectors = await getAllSectors();

      if (!events.length || !sectors.length) return;

      selectedEventId = events[0].id;
      selectedSectorKey = sectors[0].key;

      renderEventChips();
      renderSectorChips();
      await updateSelection();
    })().catch(error => {
      console.error('Failed to initialize fear section', error);
    });
  </script>
  <div class="chapter-section">
    <h3>Sectoral Natural Selection</h3>
    <p>
      Not all sectors react equally to crises. Some absorb shocks, while others amplify
      them. In this chapter, we analyze sector-level performance to identify patterns
      of resilience and vulnerability.
    </p>
    <p>
      We compare returns, drawdowns, and recovery paths across industries to understand
      how capital reallocates under stress.
    </p>
    <div class="viz-placeholder">[ Sector Heatmap Placeholder ]</div>

  </div>
  <div class="chapter-section">
    <h3>The Speed of Contagion</h3>
    <p>
      Crises rarely stay confined to one market or sector. In this chapter, we study
      how shocks propagate across assets, regions, and industries.
    </p>
    <p>
      By measuring reaction delays and cross-sector correlations, we capture the
      velocity at which fear and optimism spread through the financial system.
    </p>
    <div class="viz-placeholder">[ Sector Heatmap Placeholder ]</div>

  </div>
  <div class="chapter-section">
    <h3>Predicting Resilience</h3>
    <p>
      Some assets recover faster than others. In this chapter, we investigate which
      pre-crisis signals can help predict post-crisis resilience.
    </p>
    <p>
      We explore whether early indicators — such as trading behavior or sentiment shifts —
      provide clues about an asset’s ability to rebound.
    </p>
    <div class="viz-placeholder">[ Sector Heatmap Placeholder ]</div>

  </div>
  <div class="chapter-section">
    <h3>Crisis Playbook — The Action Guide</h3>
    <p>
      Finally, we synthesize our findings into a practical framework.
      This chapter translates historical patterns into insights that help
      interpret future crises.
    </p>
    <p>
      Rather than predicting the next shock, our goal is to understand how markets
      are likely to react — and how fear, resilience, and recovery tend to unfold.
    </p>
    <div class="viz-placeholder">[ Sector Heatmap Placeholder ]</div>

  </div>
  <div class="chapter-section">
    <h3>Conclusion</h3>
    <p>
      Conclusion
    </p>
  </div>

  <footer class="site-footer">
    <p>
      ADA Project · DataPandas · EPFL © 2025
    </p>
  </footer>
  
</body>
</html>
